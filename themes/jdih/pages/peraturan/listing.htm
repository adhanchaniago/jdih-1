title = "Peraturan"
url = "/peraturan/:slug"
layout = "default"
is_hidden = 0
show_menu = 0
robot_index = "index"
robot_follow = "follow"

[tablePeraturan]
==
<?php
use Pda\Peraturan\Models\Peraturan;
    use Pda\Peraturan\Models\Jenis;

    function onStart() { 
        // $this->prepareVars();
        // $this->prepareYears(); 
        // $nomor = Request::get('nomor');
        // $tentang = Request::get('tentang');
        // $tahun = Request::get('tahun');
        // $jenis = Request::get('jenis');
        $this['slug'] = $this->param('slug');
        
       $this['peraturan'] = Peraturan::all();
       $this['jenis'] = Jenis::all();
        

    }
    
    // function onSearchPeraturan() { $this->prepareVars(); }
    
    // function prepareVars() {
    //     $options = POST('Filter', []);

    //     $this['peraturan'] = Peraturan::listFrontEnd($options);
    //     $this['sortOptions'] = Peraturan::$allowedSortingOptions;
    //     $this['pages'] = $this['peraturan']->lastPage();
    //     $this['page'] = $this['peraturan']->currentPage();
    // }

    // function prepareYears() {
    //     $peraturan = Peraturan::all();
    //     $tahun = [];

    //     foreach ($peraturan as $aturan) {
    //         $tahun[] = $aturan->tahun;
    //     }

    //     $tahun = array_unique($tahun);
    //     rsort($tahun);

    //     $this['tahun'] = $tahun;
    // }


    // function onStart() {
    //     $collection = Db::table('pda_peraturan_hukum')->select('jenis', 'nomor', 'tahun', 'tentang', 'keterangan')->get();
    //     $this['phpArray'] = $collection->toArray();
    //     $this['jsonString'] = $collection->toJson();
    // }
?>
==
<!-- Page title -->
    <div class="page-title parallax parallax1">
        <div class="section-overlay">
        </div>
        <div class="container">
            <div class="row">
                <div class="col-md-12">                    
                    <div class="page-title-heading">
                        <h1 class="title">Peraturan</h1>
                    </div><!-- /.page-title-captions -->
                    <div class="breadcrumbs">
                        <ul>
                            <li><a href="{{ url('/') }}">Home</a></li>
                            <li> - </li>                            
                            <li>Produk Hukum</li>
                        </ul>                   
                    </div><!-- /.breadcrumbs -->   
                </div><!-- /.col-md-12 -->  
            </div><!-- /.row -->  
        </div><!-- /.container -->                      
    </div><!-- /.page-title -->

    <!-- Blog posts -->
    <section class="main-content page-listing-grid">
        <div class="container">
            <div class="row">
                <div class="col-lg-9">
                    <div id="partialPeraturan">
                        <table id="example" class="table table-striped table-bordered" style="width:100%">
                            <thead>
                                <tr>
                                    <!-- <th>#</th> -->
                                    <th>Jenis</th>
                                    <th width="10%" align="center">Nomor</th>
                                    <th align="center">Tahun</th>
                                    <th>Tentang</th>
                                    <th align="center">Keterangan</th>
                                    <th align="center">Download</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for aturan in peraturan %}
                                 <tr>
                                    <!-- <td>{{ loop.index }}</td> -->
                                    <td>{{ aturan.jenis_.nama }}</td>
                                    <td width="10%" align="center">{{ aturan.nomor }}</td>
                                    <td align="center">{{ aturan.tahun }}</td>
                                    <td><a href="{{ 'peraturan/detail'|page({ peraturan_id: aturan.id }) }}">{{ aturan.tentang }}</a></td>
                                    <td align="center">{{ aturan.keterangan }}</td>
                                    <td align="center">
                                        {% for berkas in aturan.file %}
                                        <a href="{{ berkas.path }}" title="{{ berkas.file_name }}" target="_blank"><i class="fa fa-file"></i></a>
                                        {% endfor %}
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div><!-- /.col-lg-9 -->    
                <div class="col-lg-3">
                    <div class="sidebar">
                        <div class=" widget widget-form style2">
                            <h5 class="widget-title">
                                Pencarian
                            </h5>
                            <div id="PeraturanSearch">
                                <form novalidate="" class="filter-form clearfix" id="filter-form" method="post" action="#">
                                    <p id="filter_col4" class="book-notes" data-column="3">                                      
                                        <input type="text" class="column_filter" id="col3_filter" placeholder="Tentang">
                                    </p>
                                    <!-- <p id="filter_col1" class="book-notes" data-column="0">                                      
                                        <input type="text" class="column_filter" id="col0_filter" placeholder="Jenis">
                                    </p> -->
                                    <p class="book-form-select icon" id="filter_col1" data-column="0">            
                                        <select class=" dropdown_sort" id="col0_filter">
                                            <option value="">All Categories</option>
                                            {% for type in jenis %}
                                            <option value="{{ type.nama }}">{{ type.nama }}</option>
                                            {% endfor %}
                                        </select>
                                        <i class="fa fa-angle-down"></i>
                                    </p>
                                    <p id="filter_col2" class="book-notes" data-column="1">                                      
                                        <input type="text" class="column_filter" id="col1_filter" placeholder="Nomor">
                                    </p>
                                    <p id="filter_col3" class="book-notes" data-column="2">                                      
                                        <input type="text" class="column_filter" id="col2_filter" placeholder="Tahun">
                                    </p>
                                </form>
                            </div>
                        </div>
                    </div><!-- /.sidebar -->
                </div><!-- /.col-md-3 -->            
            </div><!-- /.row -->           
        </div><!-- /.container -->   
    </section>